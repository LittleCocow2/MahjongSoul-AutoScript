# 雀魂挂机脚本

这是一个用于《雀魂》（Mahjong Soul）的自动化挂机脚本，支持“四麻”等模式，通过图像识别实现自动出牌和下一局操作。

## 功能
- 自动出牌（支持随机出牌、四麻模式）
- 自动识别“下一局”按钮
- 支持雷电模拟器（分辨率 1920x1080）
- 低内存占用，可后台运行

## 目录结构
- `src/`：源代码目录，包含主脚本 `majongsoul-autoscript.py`
- `assets/`：资源目录，包含 5 张图片模板（`next_round_button.png`, `tongban.png`, `yuanshi.png`, `chouka.png`, `zhongju.png`）
- `requirements.txt`：Python 依赖列表
- `LICENSE`：MIT 许可证

## 安装

### 1. 安装雷电模拟器(或者其他安卓模拟器)
- 下载并安装雷电模拟器 9（若使用其他安卓模拟器，需要自行查询资料，修改代码中的ip端口）：[雷电模拟器官网](https://www.ldmnq.com/?n=401674)
- 打开模拟器，在设置中将分辨率调整为 **1920x1080**，然后重启模拟器。
- 下载《雀魂》APK（[雀魂官网](https://www.mahjongsoul.com/) 或其他可信来源），拖入模拟器安装，或通过模拟器内置浏览器下载。
- 登录雀魂账号，完成更新。

**注意**：不要使用多开器启动模拟器，直接点击雷电模拟器 9 图标运行。

### 2. 配置 ADB
- 右键雷电模拟器 9 的快捷方式，选择“打开文件所在位置”。
- 在文件夹路径栏输入 `cmd` 并回车，打开命令行窗口。
- 在命令行输入以下命令并回车：
  ```bash
  adb shell
  ```
- 运行完成后关闭命令行窗口。

### 3. 安装 Python 依赖
- 确保已安装 Python 3.8 或以上版本。
- 克隆或下载本仓库到本地。
- 进入项目根目录，安装依赖：
  ```bash
  pip install -r requirements.txt
  ```
- 确保 `assets/` 目录中的 5 张图片模板与 `majongsoul-autoscript.py` 保持正确的相对路径。

## 使用
1. 启动雷电模拟器并运行《雀魂》，进入游戏主界面或对局界面。
2. 进入 `src/` 目录，运行脚本：
   ```bash
   cd src
   python majongsoul-autoscript.py
   ```
3. 根据提示选择模式：
   - **1**：占星之战
   - **2**：修罗之战
   - **3**：其他
4. 脚本将自动运行，直到检测到主界面或抽卡界面（铜币耗尽或游戏结束）。

**停止脚本**：直接关闭命令行窗口即可。

## 注意事项
- **合规性**：请严格遵守《雀魂》的服务条款，使用本脚本可能存在账号被封禁的风险，建议谨慎使用。
- **运行时长**：避免超长时间运行，建议：
  - 段位场：每天不超过 8 小时
  - 活动场：每天不超过 12 小时
- **图片模板**：确保 `assets/` 中的图片模板与游戏分辨率（1920x1080）匹配，否则可能导致识别失败。
- **脚本行为**：脚本会在检测到主界面或抽卡界面时自动停止运行。如果脚本闪退，可能是因为在主界面启动，请在对局中或模式选择界面启动。
- **推荐模式**：四人麻将效率较高，优先级建议：段位场 > 限时活动场 > 修罗场。
- **内存占用**：脚本占用内存低，可放心后台运行。

## 贡献
欢迎提交 Issues 或 Pull Requests，报告问题或提出改进建议！

## 许可证
本项目采用 MIT 许可证，详情见 [LICENSE](LICENSE) 文件。

祝大家游戏愉快！